import{b as P,c as F,d as z,e as I,f as Z,g as W,i as A,j as D,k as R}from"./chunk-ATNCQEEW.js";import{a as j}from"./chunk-OAQJ4ZBV.js";import{B as C,C as T,D as v,E as y,G as x,H as M,I as S,J as n,K as o,M as _,N as u,O as p,S as r,T as g,V as k,W as O,X as V,Z as L,fa as N,la as E,m as w,q as m,r as d,w as l,x as b}from"./chunk-UVRWJICT.js";var q=(i,c)=>c.id;function B(i,c){i&1&&(n(0,"p",4),r(1,"Lade Zeitstrahlen\u2026"),o())}function H(i,c){if(i&1&&(n(0,"p",5),r(1),o()),i&2){let e=p();l(),g(e.error)}}function Y(i,c){if(i&1){let e=_();n(0,"div",16),u("click",function(){let t=m(e).$implicit,s=p(2);return d(s.goToTimeline(t.slug))})("keydown.enter",function(){let t=m(e).$implicit,s=p(2);return d(s.goToTimeline(t.slug))}),n(1,"span",17),r(2),o(),n(3,"span",18),r(4),o(),n(5,"span",19),r(6),o()()}if(i&2){let e=c.$implicit,a=p(2);y("--timeline-color",e.color||"#0d6b5c"),l(2),g(e.name),l(2),g(e.description),l(2),g(a.typeLabel(e.type))}}function $(i,c){if(i&1&&(n(0,"div",6),M(1,Y,7,5,"div",15,q),o()),i&2){let e=p();l(),S(e.timelines)}}function G(i,c){if(i&1){let e=_();n(0,"button",20),u("click",function(){m(e);let t=p();return d(t.openModal())}),n(1,"span",21),r(2,"+"),o(),n(3,"span",22),r(4,"Hinzuf\xFCgen"),o()()}i&2&&T("aria-label","Neue Zeitlinie hinzuf\xFCgen")}var ie=(()=>{class i{constructor(e,a){this.api=e,this.router=a,this.timelines=[],this.loading=!0,this.error=null,this.newName="",this.saving=!1,this.modalOpen=!1}goToTimeline(e){this.router.navigate(["/timelines",e])}openModal(){this.modalOpen=!0,this.newName=""}closeModal(){this.modalOpen=!1}ngOnInit(){this.load()}load(){this.loading=!0,this.error=null,this.api.getTimelines().subscribe({next:e=>{this.timelines=e,this.loading=!1},error:e=>{this.error=e?.error?.error||"Zeitstrahlen konnten nicht geladen werden.",this.loading=!1}})}typeLabel(e){return{nation:"Nation",continent:"Kontinent",custom:"Eigene"}[e]||e}onSubmit(){!this.newName.trim()||this.saving||(this.saving=!0,this.api.createTimeline({name:this.newName.trim()}).subscribe({next:()=>{this.newName="",this.saving=!1,this.closeModal(),this.load()},error:e=>{this.error=e?.error?.error||"Zeitlinie konnte nicht erstellt werden.",this.saving=!1}}))}static{this.\u0275fac=function(a){return new(a||i)(b(j),b(E))}}static{this.\u0275cmp=w({type:i,selectors:[["app-timeline-list"]],standalone:!0,features:[L],decls:21,vars:6,consts:[["f","ngForm"],[1,"container"],[1,"page-intro"],[1,"subtitle"],[1,"muted"],[1,"error"],[1,"timeline-grid"],["type","button",1,"add-fab"],["title","Neue Zeitlinie",3,"closed","isOpen"],[3,"ngSubmit"],[1,"label"],["type","text","name","name","required","","placeholder","z.B. Antike",3,"ngModelChange","ngModel"],[1,"actions"],["type","button",1,"btn-secondary",3,"click"],["type","submit",3,"disabled"],["role","link","tabindex","0",1,"timeline-card",3,"--timeline-color"],["role","link","tabindex","0",1,"timeline-card",3,"click","keydown.enter"],[1,"timeline-name"],[1,"desc"],[1,"type"],["type","button",1,"add-fab",3,"click"],["aria-hidden","true",1,"add-fab-icon"],[1,"add-fab-text"]],template:function(a,t){if(a&1){let s=_();n(0,"div",1)(1,"header",2)(2,"h1"),r(3,"Deine Zeitstrahlen"),o(),n(4,"p",3),r(5,"W\xE4hle eine Zeitlinie oder erstelle eine neue, um Ereignisse vom Urknall bis heute zu erkunden."),o()(),C(6,B,2,0,"p",4)(7,H,2,1,"p",5)(8,$,3,0,"div",6),o(),C(9,G,5,1,"button",7),n(10,"app-modal",8),u("closed",function(){return m(s),d(t.closeModal())}),n(11,"form",9,0),u("ngSubmit",function(){return m(s),d(t.onSubmit())}),n(13,"label",10),r(14,"Name"),o(),n(15,"input",11),V("ngModelChange",function(h){return m(s),O(t.newName,h)||(t.newName=h),d(h)}),o(),n(16,"div",12)(17,"button",13),u("click",function(){return m(s),d(t.closeModal())}),r(18,"Abbrechen"),o(),n(19,"button",14),r(20),o()()()()}a&2&&(l(6),x(t.loading?6:t.error?7:8),l(3),x(!t.loading&&!t.error?9:-1),l(),v("isOpen",t.modalOpen),l(5),k("ngModel",t.newName),l(4),v("disabled",!t.newName.trim()||t.saving),l(),g(t.saving?"Wird erstellt\u2026":"Hinzuf\xFCgen"))},dependencies:[N,D,W,P,F,z,A,Z,I,R],styles:[".timeline-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:var(--space-md);margin-bottom:var(--space-xl)}@media (min-width: 480px){.timeline-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.25rem}}.timeline-card[_ngcontent-%COMP%]{display:block;padding:var(--space-md) var(--space-md) var(--space-md) calc(var(--space-md) + 4px);background:var(--bg-card);border-radius:var(--radius);box-shadow:var(--shadow);border:1px solid var(--border-light);border-left:4px solid var(--timeline-color);text-decoration:none;color:inherit;cursor:pointer;transition:transform .2s,box-shadow .2s,border-left-color .2s;-webkit-tap-highlight-color:transparent;min-height:88px;position:relative}.timeline-card[_ngcontent-%COMP%]:hover, .timeline-card[_ngcontent-%COMP%]:focus-visible{transform:translateY(-3px);box-shadow:var(--shadow-hover);border-left-width:5px;border-left-color:var(--timeline-color)}.timeline-card[_ngcontent-%COMP%]:active{transform:translateY(-1px)}.timeline-name[_ngcontent-%COMP%]{display:block;font-size:1.125rem;font-weight:600;letter-spacing:-.02em;margin-bottom:.35rem;color:var(--text)}.timeline-card[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:var(--text-secondary);margin:0 0 .5rem;line-height:1.45}.timeline-card[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]:empty{display:none}.type[_ngcontent-%COMP%]{font-size:.6875rem;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:.08em}.actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);margin-top:1.25rem;flex-wrap:wrap}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-left:auto}"]})}}return i})();export{ie as TimelineListComponent};
